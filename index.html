<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>精灵数值设定面板</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-shell">
    <header class="top-bar">
      <div class="branding">
        <div class="logo-badge">PO</div>
        <div>
          <h1>精灵数值设定</h1>
          <p class="subtitle">Pokemon Order Lab</p>
        </div>
      </div>
      <div class="status-panel">
        <div class="status-indicator">
          <span class="dot"></span>
          <span>同步待定</span>
        </div>
        <div class="status-date" id="statusDate"></div>
      </div>
    </header>

    <main class="content">
      <section class="editor" aria-labelledby="editorTitle">
        <div class="editor-header">
          <div>
            <p class="editor-kicker">当前编辑</p>
            <h2 id="editorTitle">#<span id="currentNumber">--</span> <span id="currentName">请选择精灵</span></h2>
          </div>
          <div class="editor-actions">
            <button class="btn secondary" id="openSelector" type="button">切换精灵</button>
            <button class="btn primary" id="saveToBox" type="button">保存到箱子</button>
          </div>
        </div>

        <form class="editor-form" id="pokemonForm">
          <input type="hidden" id="fieldPreEvs" name="Pre_Evs" value="0-0-0-0-0-0">
          <input type="hidden" id="fieldIvs" name="Ivs" value="31-31-31-31-31-31">

          <section class="panel profile-panel" aria-labelledby="profileTitle">
            <div class="panel-header">
              <div>
                <p class="panel-kicker">精灵档案</p>
                <h3 id="profileTitle">基础信息</h3>
              </div>
              <div class="chip-stack" id="profileChips">
                <span class="chip is-shiny" data-chip="shiny" hidden>闪光</span>
                <span class="chip is-boss" data-chip="boss" hidden>头目</span>
              </div>
            </div>

            <div class="profile-body">
              <div class="profile-media">
                <div class="sprite-card">
                  <div class="sprite-frame">
                    <img id="spriteImage" alt="精灵立绘" hidden>
                    <div class="sprite-placeholder" id="spritePlaceholder" aria-hidden="true">?
                    </div>
                  </div>
                  <label class="field">
                    <span>图片链接</span>
                    <input id="fieldPicture" name="Picture" type="text" placeholder="https://...">
                  </label>
                </div>

                <div class="toggle-list">
                  <label class="toggle-chip">
                    <input type="checkbox" id="fieldShiny" name="Is_Shiny">
                    <span>闪光形态</span>
                  </label>
                  <label class="toggle-chip">
                    <input type="checkbox" id="fieldBoss" name="Is_Boss">
                    <span>头目形态</span>
                  </label>
                </div>
              </div>

              <div class="profile-info">
                <div class="profile-names">
                  <label class="field">
                    <span>中文名</span>
                    <input id="fieldCN" name="CN_Name" type="text" placeholder="请输入中文名">
                  </label>
                  <label class="field">
                    <span>英文名</span>
                    <input id="fieldENG" name="ENG_Name" type="text" placeholder="请输入英文名">
                  </label>
                  <label class="field">
                    <span>图鉴编号</span>
                    <input id="fieldDex" name="Dex_No" type="text">
                  </label>
                  <label class="field">
                    <span>站内别名</span>
                    <input id="fieldWebName" name="Web_Name" type="text" placeholder="用于展示的别称">
                  </label>
                </div>

                <div class="profile-metrics">
                  <label class="field">
                    <span>档案编号</span>
                    <input id="fieldNo" name="No" type="text" readonly>
                  </label>
                  <label class="field">
                    <span>基础等级</span>
                    <input id="fieldLv" name="LV_Min" type="number" min="1" max="100">
                  </label>
                  <label class="field">
                    <span>Boss等级</span>
                    <input id="fieldBossLv" name="Boss_LV_Min" type="number" min="1" max="100">
                  </label>
                  <label class="field">
                    <span>性别设定</span>
                    <input id="fieldGender" name="Gender_Type" type="text">
                  </label>
                  <label class="field">
                    <span>推荐性别</span>
                    <input id="fieldPreGender" name="Pre_Gender" type="text">
                  </label>
                  <label class="field">
                    <span>推荐精灵球</span>
                    <select id="fieldPreBall" name="Pre_Ball"></select>
                  </label>
                  <label class="field">
                    <span>推荐持有道具</span>
                    <select id="fieldHeldItem" name="Held_Item"></select>
                  </label>
                  <label class="field">
                    <span>推荐性格</span>
                    <select id="fieldPreNature" name="Pre_Nature"></select>
                  </label>
                </div>
              </div>
            </div>
          </section>

          <section class="panel stats-panel" aria-labelledby="statsTitle">
            <div class="panel-header">
              <div>
                <p class="panel-kicker">养成配置</p>
                <h3 id="statsTitle">个体值与努力值</h3>
              </div>
            </div>
            <div class="stat-grid">
              <div class="stat-row" data-stat="hp">
                <span class="stat-name">HP</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_hp" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_hp" min="0" max="252" value="0">
                </label>
              </div>
              <div class="stat-row" data-stat="atk">
                <span class="stat-name">攻击</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_atk" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_atk" min="0" max="252" value="0">
                </label>
              </div>
              <div class="stat-row" data-stat="def">
                <span class="stat-name">防御</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_def" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_def" min="0" max="252" value="0">
                </label>
              </div>
              <div class="stat-row" data-stat="spa">
                <span class="stat-name">特攻</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_spa" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_spa" min="0" max="252" value="0">
                </label>
              </div>
              <div class="stat-row" data-stat="spd">
                <span class="stat-name">特防</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_spd" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_spd" min="0" max="252" value="0">
                </label>
              </div>
              <div class="stat-row" data-stat="spe">
                <span class="stat-name">速度</span>
                <label>
                  <span>个体值</span>
                  <input type="number" name="iv_spe" min="0" max="31" value="31">
                </label>
                <label>
                  <span>努力值</span>
                  <input type="number" name="ev_spe" min="0" max="252" value="0">
                </label>
              </div>
            </div>
            <div class="stat-footer">
              <p>努力值总计：<span id="evTotal">0</span> / 510</p>
              <p class="stat-warning" id="evWarning" hidden>努力值总量已达上限</p>
            </div>
          </section>

          <section class="panel move-panel" aria-labelledby="moveTitle">
            <div class="panel-header">
              <div>
                <p class="panel-kicker">招式配置</p>
                <h3 id="moveTitle">常规与继承技能</h3>
              </div>
            </div>
            <div class="move-grid">
              <label class="field full">
                <span>升级招式</span>
                <textarea id="fieldMoveLv" name="Move_Lv" rows="4" placeholder="按照升级顺序填写"></textarea>
              </label>
              <label class="field full">
                <span>教学机招式</span>
                <textarea id="fieldMoveTm" name="Move_TM" rows="4" placeholder="填写可学 TM 招式"></textarea>
              </label>
              <label class="field">
                <span>Boss 专属招式</span>
                <input id="fieldMoveBoss" name="Move_Boss" type="text">
              </label>
              <label class="field">
                <span>继承招式 1</span>
                <input id="fieldPreMove1" name="Pre_Move1" type="text">
              </label>
              <label class="field">
                <span>继承招式 2</span>
                <input id="fieldPreMove2" name="Pre_Move2" type="text">
              </label>
              <label class="field">
                <span>继承招式 3</span>
                <input id="fieldPreMove3" name="Pre_Move3" type="text">
              </label>
              <label class="field">
                <span>继承招式 4</span>
                <input id="fieldPreMove4" name="Pre_Move4" type="text">
              </label>
            </div>
          </section>
        </form>
      </section>

      <section class="box" aria-labelledby="boxTitle">
        <div class="box-header">
          <div>
            <p class="box-kicker">箱子</p>
            <h3 id="boxTitle">储存的精灵</h3>
          </div>
          <div class="box-sorting">
            <label for="boxOrder">排序</label>
            <select id="boxOrder">
              <option value="asc">编号升序</option>
              <option value="desc">编号降序</option>
              <option value="name">名称</option>
            </select>
          </div>
        </div>
        <div class="box-grid" id="boxGrid" aria-live="polite"></div>
        <p class="box-empty" id="boxEmpty">暂无储存的精灵，点击上方的保存按钮加入箱子。</p>
      </section>
    </main>
  </div>

  <div class="modal" id="selectorModal" aria-hidden="true" role="dialog" aria-labelledby="selectorTitle">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-content">
      <header class="modal-header">
        <div>
          <p class="modal-kicker">选择精灵</p>
          <h2 id="selectorTitle">切换精灵编号</h2>
        </div>
        <button class="modal-close" type="button" data-close aria-label="关闭">
          <span>&times;</span>
        </button>
      </header>
      <div class="modal-search">
        <input id="selectorSearch" type="search" placeholder="搜索编号或名称" autocomplete="off">
        <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 2a8 8 0 015.291 13.708l4 4a1 1 0 01-1.415 1.415l-4-4A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="currentColor" /></svg>
      </div>
      <ul class="modal-list" id="selectorList" role="listbox"></ul>
    </div>
  </div>

  <template id="boxCardTemplate">
    <article class="box-card">
      <header class="card-header">
        <div>
          <p class="card-number">#<span data-field="No"></span></p>
          <h4 class="card-name" data-field="CN_Name"></h4>
          <p class="card-subname" data-field="ENG_Name"></p>
        </div>
        <div class="card-tags">
          <span class="card-chip shiny" data-tag="shiny">闪光</span>
          <span class="card-chip boss" data-tag="boss">头目</span>
        </div>
        <button class="card-edit" type="button" data-action="edit">编辑</button>
      </header>
      <dl class="card-body">
        <div class="card-row">
          <dt>等级</dt>
          <dd data-field="LV_Min"></dd>
        </div>
        <div class="card-row">
          <dt>Boss等级</dt>
          <dd data-field="Boss_LV_Min"></dd>
        </div>
        <div class="card-row">
          <dt>球种</dt>
          <dd data-field="Pre_Ball"></dd>
        </div>
        <div class="card-row">
          <dt>性格</dt>
          <dd data-field="Pre_Nature"></dd>
        </div>
        <div class="card-row">
          <dt>道具</dt>
          <dd data-field="Held_Item"></dd>
        </div>
        <div class="card-row">
          <dt>努力值</dt>
          <dd data-field="Pre_Evs"></dd>
        </div>
        <div class="card-row">
          <dt>个体值</dt>
          <dd data-field="Ivs"></dd>
        </div>
      </dl>
      <footer class="card-footer">
        <button class="card-delete" type="button" data-action="delete">删除</button>
      </footer>
    </article>
  </template>

  <script src="app.js" type="module"></script>
</body>
</html>
